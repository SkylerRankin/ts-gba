# A program using only ARMv4 THUMB load/store multiple instructions.
# Each line consists of the following components:
#     <big-endian instruction> <text assembly for instruction> Updates=[<register/flag updates>]


# To begin, all registers and flags are 0
SET N=0, C=0, Z=0, V=0

# --- LDMIA ---

SET_MEMORY 0x20=[0xF3, 0x66, 0x8E, 0x27]
SET_MEMORY 0x24=[0xAA, 0xA0, 0x8C, 0x26]
SET_MEMORY 0x28=[0xBA, 0x05, 0xED, 0x9A]
SET_MEMORY 0x2C=[0x8A, 0xAA, 0x77, 0xC4]
SET_MEMORY 0x30=[0x76, 0x65, 0xE9, 0x3D]
SET_MEMORY 0x34=[0xC6, 0xEB, 0xE4, 0x41]
SET R0=0x24
SET R2=0x0, R3=0x0, R4=0x0, R7=0x0
0xc89c LDMIA R0!, {R2-R4, R7} Updates=[R0=0x34, R2=0x268CA0AA, R3=0x9AED05BA, R4=0xC477AA8A, R7=0x3DE96576]


# --- POP ---

SET_MEMORY 0x20=[0xF3, 0x66, 0x8E, 0x27]
SET_MEMORY 0x24=[0xAA, 0xA0, 0x8C, 0x26]
SET_MEMORY 0x28=[0xBA, 0x05, 0xED, 0x9A]
SET_MEMORY 0x2C=[0x8A, 0xAA, 0x77, 0xC4]
SET_MEMORY 0x30=[0x76, 0x65, 0xE9, 0x3D]
SET_MEMORY 0x34=[0xC7, 0xEB, 0xE4, 0x41]
SET R13=0x24
SET R2=0x0, R3=0x0, R4=0x0, R7=0x0, R15=0x0
0xbd9c POP {R2-R4, R7, PC} Updates=[R2=0x268CA0AA, R3=0x9AED05BA, R4=0xC477AA8A, R7=0x3DE96576, R13=0x38, R15=0x41E4EBCA]


# --- PUSH ---

SET_MEMORY 0x20=[0x00, 0x00, 0x00, 0x00]
SET_MEMORY 0x24=[0x00, 0x00, 0x00, 0x00]
SET_MEMORY 0x28=[0x00, 0x00, 0x00, 0x00]
SET_MEMORY 0x2C=[0x00, 0x00, 0x00, 0x00]
SET_MEMORY 0x30=[0x00, 0x00, 0x00, 0x00]
SET_MEMORY 0x34=[0x00, 0x00, 0x00, 0x00]
SET R13=0x38
SET R2=0x268CA0AA, R3=0x9AED05BA, R4=0xC477AA8A, R7=0x3DE96576, R14=0x41E4EBC7
0xb59c PUSH {R2-R4, R7, LR} Updates=[R13=0x24]
CHECK_MEMORY 0x20=[0x00, 0x00, 0x00, 0x00]
CHECK_MEMORY 0x24=[0xAA, 0xA0, 0x8C, 0x26]
CHECK_MEMORY 0x28=[0xBA, 0x05, 0xED, 0x9A]
CHECK_MEMORY 0x2C=[0x8A, 0xAA, 0x77, 0xC4]
CHECK_MEMORY 0x30=[0x76, 0x65, 0xE9, 0x3D]
CHECK_MEMORY 0x34=[0xC7, 0xEB, 0xE4, 0x41]
CHECK_MEMORY 0x38=[0x00, 0x00, 0x00, 0x00]


# --- STMIA ---

SET_MEMORY 0x20=[0x00, 0x00, 0x00, 0x00]
SET_MEMORY 0x24=[0x00, 0x00, 0x00, 0x00]
SET_MEMORY 0x28=[0x00, 0x00, 0x00, 0x00]
SET_MEMORY 0x2C=[0x00, 0x00, 0x00, 0x00]
SET_MEMORY 0x30=[0x00, 0x00, 0x00, 0x00]
SET_MEMORY 0x34=[0x00, 0x00, 0x00, 0x00]
SET R0=0x24
SET R2=0x268CA0AA, R3=0x9AED05BA, R4=0xC477AA8A, R7=0x3DE96576
0xc09c STMIA R0!, {R2-R4, R7} Updates=[R0=0x34]
CHECK_MEMORY 0x20=[0x00, 0x00, 0x00, 0x00]
CHECK_MEMORY 0x24=[0xAA, 0xA0, 0x8C, 0x26]
CHECK_MEMORY 0x28=[0xBA, 0x05, 0xED, 0x9A]
CHECK_MEMORY 0x2C=[0x8A, 0xAA, 0x77, 0xC4]
CHECK_MEMORY 0x30=[0x76, 0x65, 0xE9, 0x3D]
CHECK_MEMORY 0x34=[0x00, 0x00, 0x00, 0x00]
CHECK_MEMORY 0x38=[0x00, 0x00, 0x00, 0x00]
